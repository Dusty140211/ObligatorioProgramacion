@using Obligatorio_Logica;
@model List<Pago>

<input type="submit" name="CargarPago" value="Cargar Nuevo Pago">

<p>Pagos guardados</p>

    <table>
        <tr>
            <th>Monto</th>
            <th>Descripción</th>
            <th>Tipo de gasto</th>
            <th>Método de pago</th>
            <th>Fecha o Fecha de Inicio</th>
            <th>Recurrente</th>
            <th>Pagos pendientes</th>
        </tr>
        <tbody>

            @foreach(Pago p in Model)
            {
                <tr>
                    <td>@p.Monto</td>
                    <td>@p.Descripcion</td>
                    <td>@if (p.Tipo != null)
                    {
                        @p.Tipo.Nombre.ToString()       
                    }
                    </td>
                    <td>@p.Metodo</td>
                    <td>
                          @if (p is PagoRecurrente pr)
                        {
                            @pr.FechaInicio.ToString("dd/MM/yyyy")
                        }
                        else if (p is PagoUnico pu)
                        {
                            @pu.Fecha.ToString("dd/MM/yyyy")
                        }
                    </td>
                    <td>
					    @if (p is PagoRecurrente)
					    {
						    @("Sí")
					    }
					    else if(p is PagoUnico)
					    {
						    @("No")
					    }
                    </td>
                    <td>
					    @if (p is PagoRecurrente prec)
					    {
                            @(prec.calcularPagosPendientes())
                        }

                    <td/>
				</tr>

            }
        </tbody>
        
    </table>


